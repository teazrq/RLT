<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='
      Fit models for regression, classification and 
                   survival analysis using reinforced splitting rules.
                   The model reduces to regular random forests if 
                   reinforcement is turned off.


If x is a data.frame, then all factors are treated as categorical variables.
To specify parameters of embedded models when reinforcement = TRUE,
users can supply the following in the param.control list:

embed.resample.prob: proportion of samples (of the internal node)
in the embedded model
embed.mtry: number or proportion of variables
embed.nmin terminal node size
embed.split.gen random
cutting point search method ("random", "rank" or "best")
embed.nsplit
number of random cutting points.


For some other experimental features, please see check_param_RLT.'><title>            Reinforcement Learning Trees
 — RLT • RLT</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="            Reinforcement Learning Trees
 — RLT"><meta property="og:description" content='
      Fit models for regression, classification and 
                   survival analysis using reinforced splitting rules.
                   The model reduces to regular random forests if 
                   reinforcement is turned off.


If x is a data.frame, then all factors are treated as categorical variables.
To specify parameters of embedded models when reinforcement = TRUE,
users can supply the following in the param.control list:

embed.resample.prob: proportion of samples (of the internal node)
in the embedded model
embed.mtry: number or proportion of variables
embed.nmin terminal node size
embed.split.gen random
cutting point search method ("random", "rank" or "best")
embed.nsplit
number of random cutting points.


For some other experimental features, please see check_param_RLT.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">RLT</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.1.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1><div class="sourceCode"><pre><code>            Reinforcement Learning Trees
</code></pre></div></h1>
      
      <div class="d-none name"><code>RLT.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    
<div class="sourceCode"><pre><code>      Fit models for regression, classification and 
                   survival analysis using reinforced splitting rules.
                   The model reduces to regular random forests if 
                   reinforcement is turned off.
</code></pre></div>

<p>If <code>x</code> is a data.frame, then all factors are treated as categorical variables.</p>
<p>To specify parameters of embedded models when <code>reinforcement = TRUE</code>,
users can supply the following in the <code>param.control</code> list:</p>
<ul><li><p><code>embed.resample.prob</code>: proportion of samples (of the internal node)
in the embedded model</p></li>
<li><p><code>embed.mtry</code>: number or proportion of variables</p></li>
<li><p><code>embed.nmin</code> terminal node size</p></li>
<li><p><code>embed.split.gen</code> random
cutting point search method (<code>"random"</code>, <code>"rank"</code> or <code>"best"</code>)</p></li>
<li><p><code>embed.nsplit</code>
number of random cutting points.</p></li>
</ul><p>For some other experimental features, please see <code><a href="check_param_RLT.html">check_param_RLT</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">RLT</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">y</span>,</span>
<span>  censor <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  model <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ntrees <span class="op">=</span> <span class="kw">if</span> <span class="op">(</span><span class="va">reinforcement</span><span class="op">)</span> <span class="fl">100</span> <span class="kw">else</span> <span class="fl">500</span>,</span>
<span>  mtry <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">/</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  nmin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  split.gen <span class="op">=</span> <span class="st">"random"</span>,</span>
<span>  nsplit <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  resample.replace <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  resample.prob <span class="op">=</span> <span class="kw">if</span> <span class="op">(</span><span class="va">resample.replace</span><span class="op">)</span> <span class="fl">1</span> <span class="kw">else</span> <span class="fl">0.8</span>,</span>
<span>  resample.preset <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  resample.track <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  obs.w <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  var.w <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  linear.comb <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  importance <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  var.ready <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  reinforcement <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  param.control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  ncores <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  verbose <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>A <code>matrix</code> or <code>data.frame</code> of features</p></dd>


<dt>y</dt>
<dd><p>Response variable. a <code>numeric</code>/<code>factor</code> vector.</p></dd>


<dt>censor</dt>
<dd><p>The censoring indicator if survival model is used.</p></dd>


<dt>model</dt>
<dd><p>The model type: <code>"regression"</code>, <code>"classification"</code>
or <code>"survival"</code>.</p></dd>


<dt>ntrees</dt>
<dd><p>Number of trees, <code>ntrees = 100</code> if reinforcement is
used and <code>ntrees = 1000</code> otherwise.</p></dd>


<dt>mtry</dt>
<dd><p>Number of randomly selected variables used at each
internal node.</p></dd>


<dt>nmin</dt>
<dd><p>Terminal node size. Splitting will stop when the internal
node size is less than twice of <code>nmin</code>. This is
almost equivalent to setting <code>nodesize</code> \(= 2 \times\)
<code>nmin</code> in the <code>randomForest</code> package.</p></dd>


<dt>split.gen</dt>
<dd><p>How the cutting points are generated: <code>"random"</code>,
<code>"rank"</code> or <code>"best"</code>. If minimum child node size is
enforced (<code>alpha</code> $&gt; 0$), then <code>"rank"</code> and <code>"best"</code>
should be used.</p></dd>


<dt>nsplit</dt>
<dd><p>Number of random cutting points to compare for each
variable at an internal node.</p></dd>


<dt>resample.replace</dt>
<dd><p>Whether the in-bag samples are obtained with
replacement.</p></dd>


<dt>resample.prob</dt>
<dd><p>Proportion of in-bag samples.</p></dd>


<dt>resample.preset</dt>
<dd><p>A pre-specified matrix for in-bag data indicator/count
matrix. It must be an \(n \times\) <code>ntrees</code>
matrix and cannot contain negative values. Extremely
large counts are not recommended, and the sum of
each column cannot exceed \(n\). If provided, then
resample.track will be set to <code>TRUE</code>. This is an feature
is mainly use when estimating variances of a random forest.
Use at your own risk.</p></dd>


<dt>resample.track</dt>
<dd><p>Whether to keep track of the observations used in each tree.</p></dd>


<dt>obs.w</dt>
<dd><p>Observation weights</p></dd>


<dt>var.w</dt>
<dd><p>Variable weights. If this is supplied, the default is to
perform weighted sampling of <code>mtry</code> variables. For
other usage, see the details of <code>split.rule</code> in
<code><a href="check_param_RLT.html">check_param_RLT</a></code>.</p></dd>


<dt>linear.comb</dt>
<dd><p>When <code>linear.comb</code> is larger than 1, a linear combination
split is used. When <code>reinforcement</code> is <code>TRUE</code>, the
variables with the highest potential at an internal node is used.
When <code>reinforcement</code> is <code>FALSE</code>, a marginal screening is
used. In both cases, SIR and SAVE are used to determine the coefficients
of the combination. When a categorical variable has the highest
potential, then a single variable is used. Currently restricted to
less than 5 number of variables in the linear combination.</p></dd>


<dt>importance</dt>
<dd><p>Whether to calculate variable importance measures. The calculation
follows Breiman's original permutation strategy.</p></dd>


<dt>var.ready</dt>
<dd><p>Construct <code>resample.preset</code> automatically to allow variance
estimations for prediction. If this is used, then <code>resample.replace</code>
will be set to <code>FALSE</code> and <code>resample.prob</code> should be no
larger than \(n / 2\). It is recommended to use a very large
<code>ntrees</code>, e.g, 10000 or larger. For <code>resample.prob</code> greater than
\(n / 2\), one should use the <code><a href="Reg_Var_Forest.html">Reg_Var_Forest</a></code> function.</p></dd>


<dt>reinforcement</dt>
<dd><p>Should reinforcement splitting rule be used. Default
is <code>"FALSE"</code>, i.e., regular random forests. When it
is activated, embedded model tuning parameters are
automatically chosen. They can also be specified in
<code>RLT.control</code>.</p></dd>


<dt>param.control</dt>
<dd><p>A list of additional parameters. This can be used to
specify other features in a random forest and set embedded
model parameters for reinforcement splitting rules.
See <code>check_param_RLT</code> and <code>set_embed_param</code> for
more details. using <code>reinforcement = TRUE</code> will automatically
generate some default tunings. However, they are not necessarily
good.</p></dd>


<dt>ncores</dt>
<dd><p>Number of cores. Default is 0 (using all available cores).</p></dd>


<dt>verbose</dt>
<dd><p>Whether fitting info should be printed.</p></dd>


<dt>seed</dt>
<dd><p>Random seed number to replicate a previously fitted forest.
Internally, the <code>xoshiro256++</code> generator is used. If not specified,
a seed will be generated automatically.</p></dd>


<dt>...</dt>
<dd><p>Additional arguments.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A <code>RLT</code> object, constructed as a list consisting</p>
<dl><dt>FittedForest</dt>
<dd><p>Fitted tree structures</p></dd>

<dt>VarImp</dt>
<dd><p>Variable importance measures, if <code>importance = TRUE</code></p></dd>

<dt>Prediction</dt>
<dd><p>In-bag prediction values</p></dd>

<dt>OOBPrediction</dt>
<dd><p>Out-of-bag prediction values</p></dd>

<dt>ObsTrack</dt>
<dd><p>An \(n \times\) <code>ntrees</code> matrix that indicates which observations
are used in each tree. Provided if <code>resample.preset</code>
is used or <code>resample.track = TRUE</code>.</p></dd>


</dl><p><strong>For Survival Forests</strong></p>
<dl><dt>NFail</dt>
<dd><p>The number of observed failure times</p></dd>

<dt>VarImpCov</dt>
<dd><p>if <code>VI.var=TRUE</code>, estimated covariance matrix for the variable importance</p></dd>

<dt>cindex_tree</dt>
<dd><p>Out-of-bag c-index for each tree</p></dd>

<dt>cindex</dt>
<dd><p>Out-of-bag c-index for the forest</p></dd>

<dt>timepoints</dt>
<dd><p>ordered observed failure times</p></dd>

<dt>y.point</dt>
<dd><p>order of \(y\) by observed failure times</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Zhu, R., Zeng, D., &amp; Kosorok, M. R. (2015) "Reinforcement Learning Trees." Journal of the American Statistical Association. 110(512), 1770-1784.</p>
<p></p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Ruoqing Zhu, Sarah Formentini.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

