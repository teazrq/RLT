<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>RLT Package: Regression With Reinforcement Learning and Linear Combination Splits ‚Ä¢ RLT</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="RLT Package: Regression With Reinforcement Learning and Linear Combination Splits">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">RLT</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.2.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/Test-RLT.html">Get Started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials">
<li><a class="dropdown-item" href="../articles/Test-Reg.html">Regression</a></li>
    <li><a class="dropdown-item" href="../articles/Test-Cla.html">Classification</a></li>
    <li><a class="dropdown-item" href="../articles/Test-Surv.html">Survival</a></li>
    <li><a class="dropdown-item" href="../articles/Variable-Importance.html">Variable Importance</a></li>
    <li><a class="dropdown-item" href="../articles/Confidence-Interval.html">Confidence Interval Estimation</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial_rl.html">Reinforcement Learning Splitting Rule</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../DEVELOPING.html">Developing</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/teazrq/RLT" aria-label="GitHub"><span class="fa fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>RLT Package: Regression With Reinforcement Learning and Linear Combination Splits</h1>
                        <h4 data-toc-skip class="author">Ruoqing
Zhu</h4>
            
            <h4 data-toc-skip class="date">Last Updated: July 16,
2025</h4>
      

      <div class="d-none name"><code>Test-RLT-Reg.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="install-and-load-package">Install and Load Package<a class="anchor" aria-label="anchor" href="#install-and-load-package"></a>
</h2>
<p>Install and load the GitHub version of the RLT package. Do not use
the CRAN version.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="co"># install.packages("devtools")</span></span>
<span>  <span class="co"># devtools::install_github("teazrq/RLT")</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cran.r-project.org/package=RLT" class="external-link">RLT</a></span><span class="op">)</span></span>
<span><span class="co">## RLT and Random Forests v4.2.6</span></span>
<span><span class="co">## pre-release at github.com/teazrq/RLT</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="single-variable-embedded-splitting">Single Variable Embedded Splitting<a class="anchor" aria-label="anchor" href="#single-variable-embedded-splitting"></a>
</h2>
<p>When <code>reinforcement</code> is enabled, an embedded random forest
model and the corresponding variable importance measure will be used to
search for the best splitting rule. There will be a default setting of
parameters for the embedded model, however you can still tune them
individually.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">n</span> <span class="op">=</span> <span class="fl">1000</span></span>
<span>  <span class="va">p</span> <span class="op">=</span> <span class="fl">10</span></span>
<span>  <span class="va">X</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">*</span><span class="va">p</span><span class="op">)</span>, <span class="va">n</span>, <span class="va">p</span><span class="op">)</span></span>
<span>  <span class="va">y</span> <span class="op">=</span> <span class="fl">1</span> <span class="op">+</span> <span class="va">X</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">X</span><span class="op">[</span>, <span class="fl">3</span><span class="op">]</span> <span class="op">+</span> <span class="va">X</span><span class="op">[</span>, <span class="fl">9</span><span class="op">]</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">testX</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">*</span><span class="va">p</span><span class="op">)</span>, <span class="va">n</span>, <span class="va">p</span><span class="op">)</span></span>
<span>  <span class="va">testy</span> <span class="op">=</span> <span class="fl">1</span> <span class="op">+</span> <span class="va">testX</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">testX</span><span class="op">[</span>, <span class="fl">3</span><span class="op">]</span> <span class="op">+</span> <span class="va">testX</span><span class="op">[</span>, <span class="fl">9</span><span class="op">]</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">start_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">RLTfit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/RLT.html">RLT</a></span><span class="op">(</span><span class="va">X</span>, <span class="va">y</span>, model <span class="op">=</span> <span class="st">"regression"</span>, </span>
<span>                ntrees <span class="op">=</span> <span class="fl">100</span>, ncores <span class="op">=</span> <span class="fl">1</span>, nmin <span class="op">=</span> <span class="fl">10</span>,</span>
<span>                split.gen <span class="op">=</span> <span class="st">"random"</span>, nsplit <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                resample.prob <span class="op">=</span> <span class="fl">0.85</span>, resample.replace <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                reinforcement <span class="op">=</span> <span class="cn">TRUE</span>, importance <span class="op">=</span> <span class="st">"distribute"</span>,</span>
<span>                param.control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"embed.ntrees"</span> <span class="op">=</span> <span class="fl">50</span>,</span>
<span>                                     <span class="st">"embed.mtry"</span> <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>,</span>
<span>                                     <span class="st">"embed.nmin"</span> <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>,</span>
<span>                verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">## Regression Random Forest ... </span></span>
<span><span class="co">## ---------- Parameters Summary ----------</span></span>
<span><span class="co">##               (N, P) = (1000, 10)</span></span>
<span><span class="co">##           # of trees = 100</span></span>
<span><span class="co">##         (mtry, nmin) = (3, 10)</span></span>
<span><span class="co">##       split generate = Random, 1</span></span>
<span><span class="co">##             sampling = 0.85 w/o replace</span></span>
<span><span class="co">##   (Obs, Var) weights = (No, No)</span></span>
<span><span class="co">##           importance = distribute</span></span>
<span><span class="co">##        reinforcement = Yes</span></span>
<span><span class="co">## ----------------------------------------</span></span>
<span><span class="co">##  embed.ntrees            = 50</span></span>
<span><span class="co">##  embed.mtry              = 50%</span></span>
<span><span class="co">##  embed.nmin              = 5</span></span>
<span><span class="co">##  embed.split.gen         = Random, 1</span></span>
<span><span class="co">##  embed.resample.replace  = TRUE</span></span>
<span><span class="co">##  embed.resample.prob     = 0.9</span></span>
<span><span class="co">##  embed.mute              = 0</span></span>
<span><span class="co">##  embed.protect           = 14</span></span>
<span><span class="co">##  embed.threshold         = 0.25</span></span>
<span><span class="co">## ----------------------------------------</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/difftime.html" class="external-link">difftime</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">start_time</span>, units <span class="op">=</span> <span class="st">"secs"</span><span class="op">)</span></span>
<span><span class="co">## Time difference of 47.14123 secs</span></span>
<span>  </span>
<span>    <span class="co"># oob error</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="op">(</span><span class="va">RLTfit</span><span class="op">$</span><span class="va">Prediction</span> <span class="op">-</span> <span class="va">y</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">## [1] 1.332247</span></span>
<span>  </span>
<span>  <span class="co"># prediction error</span></span>
<span>  <span class="va">pred</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">RLTfit</span>, <span class="va">testX</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="op">(</span><span class="va">pred</span><span class="op">$</span><span class="va">Prediction</span> <span class="op">-</span> <span class="va">testy</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">## [1] 1.279387</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="co"># sparse variable importance</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html" class="external-link">barplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">RLTfit</span><span class="op">$</span><span class="va">VarImp</span><span class="op">)</span>, main <span class="op">=</span> <span class="st">"RLT"</span><span class="op">)</span></span></code></pre></div>
<p><img src="Test-RLT-Reg_files/figure-html/unnamed-chunk-3-1.png" width="75%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  </span>
<span>  <span class="co"># check one tree</span></span>
<span>  <span class="fu"><a href="../reference/get.one.tree.html">get.one.tree</a></span><span class="op">(</span><span class="va">RLTfit</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">## Tree #1 in the fitted regression forest:</span></span>
<span><span class="co">##     SplitVar   SplitValue LeftNode RightNode NodeWeight      NodeAve</span></span>
<span><span class="co">## 1       V 1  -0.980294208        2         3        850  0.000000000</span></span>
<span><span class="co">## 2       V 3   1.081845086        4         5        128  0.000000000</span></span>
<span><span class="co">## 3       V 9  -1.975008396       42        43        722  0.000000000</span></span>
<span><span class="co">## 4       V 9  -0.567707078        6         7        109  0.000000000</span></span>
<span><span class="co">## 5       V 9  -3.314706284       38        39         19  0.000000000</span></span>
<span><span class="co">## 6       V 3  -0.166537182        8         9         40  0.000000000</span></span>
<span><span class="co">## 7       V 3  -0.227713509       20        21         69  0.000000000</span></span>
<span><span class="co">## 8       V 9  -1.057140123       10        11         21  0.000000000</span></span>
<span><span class="co">## 9       V 4   0.129346882       14        15         19  0.000000000</span></span>
<span><span class="co">## 10      &lt;NA&gt;           NA       NA        NA          9 -2.946581367</span></span>
<span><span class="co">## 11     V 10  -0.965233503       12        13         12  0.000000000</span></span>
<span><span class="co">## 12      &lt;NA&gt;           NA       NA        NA          3 -2.357358172</span></span>
<span><span class="co">## 13      &lt;NA&gt;           NA       NA        NA          9 -1.413073684</span></span>
<span><span class="co">## 14      V 4  -1.475830364       16        17         13  0.000000000</span></span>
<span><span class="co">## 15      &lt;NA&gt;           NA       NA        NA          6 -2.569854211</span></span>
<span><span class="co">## 16      &lt;NA&gt;           NA       NA        NA          1 -0.404507502</span></span>
<span><span class="co">## 17      V 4  -1.041379040       18        19         12  0.000000000</span></span>
<span><span class="co">## 18      &lt;NA&gt;           NA       NA        NA          4 -0.795853226</span></span>
<span><span class="co">## 19      &lt;NA&gt;           NA       NA        NA          8 -1.597350858</span></span>
<span><span class="co">## 20      V 3  -1.068702106       22        23         33  0.000000000</span></span>
<span><span class="co">## 21      V 9  -0.432333301       26        27         36  0.000000000</span></span>
<span><span class="co">## 22      V 1  -2.099225632       24        25         11  0.000000000</span></span>
<span><span class="co">## 23      &lt;NA&gt;           NA       NA        NA         22 -0.307904267</span></span>
<span><span class="co">## 24      &lt;NA&gt;           NA       NA        NA          2 -2.892655219</span></span>
<span><span class="co">## 25      &lt;NA&gt;           NA       NA        NA          9 -2.312824540</span></span>
<span><span class="co">## 26      &lt;NA&gt;           NA       NA        NA          2  0.347616707</span></span>
<span><span class="co">## 27      V 9   0.063996427       28        29         34  0.000000000</span></span>
<span><span class="co">## 28      &lt;NA&gt;           NA       NA        NA         10 -0.311221632</span></span>
<span><span class="co">## 29      V 5   0.888988473       30        31         24  0.000000000</span></span>
<span><span class="co">## 30      V 5  -1.209662195       32        33         21  0.000000000</span></span>
<span><span class="co">## 31      &lt;NA&gt;           NA       NA        NA          3  1.352770278</span></span>
<span><span class="co">## 32      &lt;NA&gt;           NA       NA        NA          2 -0.989977059</span></span>
<span><span class="co">## 33      V 3  -0.059455969       34        35         19  0.000000000</span></span>
<span><span class="co">## 34      &lt;NA&gt;           NA       NA        NA          5 -0.128353622</span></span>
<span><span class="co">## 35      V 5  -0.229565449       36        37         14  0.000000000</span></span>
<span><span class="co">## 36      &lt;NA&gt;           NA       NA        NA          8  1.171801487</span></span>
<span><span class="co">## 37      &lt;NA&gt;           NA       NA        NA          6  0.667392199</span></span>
<span><span class="co">## 38      &lt;NA&gt;           NA       NA        NA          1 -3.210977199</span></span>
<span><span class="co">## 39      V 5  -0.747214107       40        41         18  0.000000000</span></span>
<span><span class="co">## 40      &lt;NA&gt;           NA       NA        NA          9  1.278504984</span></span>
<span><span class="co">## 41      &lt;NA&gt;           NA       NA        NA          9  0.790146990</span></span>
<span><span class="co">## 42      V 1  -0.012259387       44        45         22  0.000000000</span></span>
<span><span class="co">## 43      V 9  -0.342721271       48        49        700  0.000000000</span></span>
<span><span class="co">## 44      &lt;NA&gt;           NA       NA        NA         10 -2.144898360</span></span>
<span><span class="co">## 45      V 1   0.372123840       46        47         12  0.000000000</span></span>
<span><span class="co">## 46      &lt;NA&gt;           NA       NA        NA          3 -1.609794044</span></span>
<span><span class="co">## 47      &lt;NA&gt;           NA       NA        NA          9 -0.491322769</span></span>
<span><span class="co">## 48      V 3   0.943714876       50        51        249  0.000000000</span></span>
<span><span class="co">## 49      V 3  -0.390820753      130       131        451  0.000000000</span></span>
<span><span class="co">## 50      V 1  -0.948187756       52        53        209  0.000000000</span></span>
<span><span class="co">## 51      V 1   0.364553558      124       125         40  0.000000000</span></span>
<span><span class="co">## 52      &lt;NA&gt;           NA       NA        NA          2 -2.086041019</span></span>
<span><span class="co">## 53      V 1  -0.381395987       54        55        207  0.000000000</span></span>
<span><span class="co">## 54      V 3   0.840826107       56        57         48  0.000000000</span></span>
<span><span class="co">## 55      V 1   0.069347145       72        73        159  0.000000000</span></span>
<span><span class="co">## 56      V 3   0.494422039       58        59         47  0.000000000</span></span>
<span><span class="co">## 57      &lt;NA&gt;           NA       NA        NA          1 -0.045884843</span></span>
<span><span class="co">## 58      V 3  -0.592980770       60        61         39  0.000000000</span></span>
<span><span class="co">## 59      &lt;NA&gt;           NA       NA        NA          8 -0.131433235</span></span>
<span><span class="co">## 60      V 3  -0.693980785       62        63         16  0.000000000</span></span>
<span><span class="co">## 61      V 8   0.366139663       66        67         23  0.000000000</span></span>
<span><span class="co">## 62      V 3  -1.249552132       64        65         15  0.000000000</span></span>
<span><span class="co">## 63      &lt;NA&gt;           NA       NA        NA          1 -0.379246393</span></span>
<span><span class="co">## 64      &lt;NA&gt;           NA       NA        NA          9 -1.656711905</span></span>
<span><span class="co">## 65      &lt;NA&gt;           NA       NA        NA          6 -0.418339252</span></span>
<span><span class="co">## 66      V 7   0.844452684       68        69         11  0.000000000</span></span>
<span><span class="co">## 67      V 5  -0.038589072       70        71         12  0.000000000</span></span>
<span><span class="co">## 68      &lt;NA&gt;           NA       NA        NA         10 -0.722036381</span></span>
<span><span class="co">## 69      &lt;NA&gt;           NA       NA        NA          1 -0.433014076</span></span>
<span><span class="co">## 70      &lt;NA&gt;           NA       NA        NA          7 -0.631405423</span></span>
<span><span class="co">## 71      &lt;NA&gt;           NA       NA        NA          5 -1.106582171</span></span>
<span><span class="co">## 72      V 3   0.253750270       74        75         46  0.000000000</span></span>
<span><span class="co">## 73      V 1   1.176608935       88        89        113  0.000000000</span></span>
<span><span class="co">## 74      V 3  -1.402474593       76        77         30  0.000000000</span></span>
<span><span class="co">## 75      V 9  -0.870533884       86        87         16  0.000000000</span></span>
<span><span class="co">## 76      &lt;NA&gt;           NA       NA        NA          5 -2.292160534</span></span>
<span><span class="co">## 77      V 9  -1.248944399       78        79         25  0.000000000</span></span>
<span><span class="co">## 78      &lt;NA&gt;           NA       NA        NA          9 -0.821608795</span></span>
<span><span class="co">## 79      V 4  -0.707155481       80        81         16  0.000000000</span></span>
<span><span class="co">## 80      &lt;NA&gt;           NA       NA        NA          2 -1.410490863</span></span>
<span><span class="co">## 81      V 4   0.541512747       82        83         14  0.000000000</span></span>
<span><span class="co">## 82      V 4  -0.360714757       84        85         11  0.000000000</span></span>
<span><span class="co">## 83      &lt;NA&gt;           NA       NA        NA          3 -1.016217441</span></span>
<span><span class="co">## 84      &lt;NA&gt;           NA       NA        NA          3  0.956852740</span></span>
<span><span class="co">## 85      &lt;NA&gt;           NA       NA        NA          8 -0.177579922</span></span>
<span><span class="co">## 86      &lt;NA&gt;           NA       NA        NA         10 -0.445508047</span></span>
<span><span class="co">## 87      &lt;NA&gt;           NA       NA        NA          6  1.362056300</span></span>
<span><span class="co">## 88      V 9  -0.414155432       90        91         77  0.000000000</span></span>
<span><span class="co">## 89      V 7  -1.310902523      112       113         36  0.000000000</span></span>
<span><span class="co">## 90      V 9  -0.704789443       92        93         74  0.000000000</span></span>
<span><span class="co">## 91      &lt;NA&gt;           NA       NA        NA          3  0.822624630</span></span>
<span><span class="co">## 92      V 9  -1.334623845       94        95         49  0.000000000</span></span>
<span><span class="co">## 93      V 3   0.502624752      106       107         25  0.000000000</span></span>
<span><span class="co">## 94      V 3  -0.587525038       96        97         20  0.000000000</span></span>
<span><span class="co">## 95      V 5  -0.588941176      100       101         29  0.000000000</span></span>
<span><span class="co">## 96      &lt;NA&gt;           NA       NA        NA          3 -2.101852726</span></span>
<span><span class="co">## 97      V 9  -1.546749861       98        99         17  0.000000000</span></span>
<span><span class="co">## 98      &lt;NA&gt;           NA       NA        NA          9 -0.377257958</span></span>
<span><span class="co">## 99      &lt;NA&gt;           NA       NA        NA          8  0.502438622</span></span>
<span><span class="co">## 100     &lt;NA&gt;           NA       NA        NA         12 -0.152758117</span></span>
<span><span class="co">## 101     V 6   0.188828891      102       103         17  0.000000000</span></span>
<span><span class="co">## 102     V 3   0.371449427      104       105         11  0.000000000</span></span>
<span><span class="co">## 103     &lt;NA&gt;           NA       NA        NA          6  1.351209989</span></span>
<span><span class="co">## 104     &lt;NA&gt;           NA       NA        NA          7  0.124928479</span></span>
<span><span class="co">## 105     &lt;NA&gt;           NA       NA        NA          4  1.406889173</span></span>
<span><span class="co">## 106     V 3  -0.254496482      108       109         22  0.000000000</span></span>
<span><span class="co">## 107     &lt;NA&gt;           NA       NA        NA          3  1.600456857</span></span>
<span><span class="co">## 108     V 8  -0.608467484      110       111         14  0.000000000</span></span>
<span><span class="co">## 109     &lt;NA&gt;           NA       NA        NA          8  1.240444565</span></span>
<span><span class="co">## 110     &lt;NA&gt;           NA       NA        NA          6  0.830417982</span></span>
<span><span class="co">## 111     &lt;NA&gt;           NA       NA        NA          8 -0.208581743</span></span>
<span><span class="co">## 112     &lt;NA&gt;           NA       NA        NA          4  1.602902041</span></span>
<span><span class="co">## 113     V 3   0.740537784      114       115         32  0.000000000</span></span>
<span><span class="co">## 114     V 9  -0.432452981      116       117         28  0.000000000</span></span>
<span><span class="co">## 115     &lt;NA&gt;           NA       NA        NA          4  3.109474634</span></span>
<span><span class="co">## 116     V 9  -1.529638071      118       119         27  0.000000000</span></span>
<span><span class="co">## 117     &lt;NA&gt;           NA       NA        NA          1 -0.588311255</span></span>
<span><span class="co">## 118     &lt;NA&gt;           NA       NA        NA          3  1.059922330</span></span>
<span><span class="co">## 119     V 9  -0.758692636      120       121         24  0.000000000</span></span>
<span><span class="co">## 120     V 3  -1.072888333      122       123         14  0.000000000</span></span>
<span><span class="co">## 121     &lt;NA&gt;           NA       NA        NA         10  2.265950232</span></span>
<span><span class="co">## 122     &lt;NA&gt;           NA       NA        NA          2 -0.159231460</span></span>
<span><span class="co">## 123     &lt;NA&gt;           NA       NA        NA         12  1.259372165</span></span>
<span><span class="co">## 124     &lt;NA&gt;           NA       NA        NA         25  1.274163571</span></span>
<span><span class="co">## 125     V 7  -1.156705580      126       127         15  0.000000000</span></span>
<span><span class="co">## 126     &lt;NA&gt;           NA       NA        NA          1  5.203009807</span></span>
<span><span class="co">## 127     V 6   0.448026134      128       129         14  0.000000000</span></span>
<span><span class="co">## 128     &lt;NA&gt;           NA       NA        NA         11  2.494537473</span></span>
<span><span class="co">## 129     &lt;NA&gt;           NA       NA        NA          3  2.466676960</span></span>
<span><span class="co">## 130     V 9  -0.164446376      132       133        141  0.000000000</span></span>
<span><span class="co">## 131     V 1   1.421779808      168       169        310  0.000000000</span></span>
<span><span class="co">## 132     V 1   1.092478657      134       135         22  0.000000000</span></span>
<span><span class="co">## 133     V 1   0.667522687      138       139        119  0.000000000</span></span>
<span><span class="co">## 134     V 1   0.290622192      136       137         20  0.000000000</span></span>
<span><span class="co">## 135     &lt;NA&gt;           NA       NA        NA          2  0.748583516</span></span>
<span><span class="co">## 136     &lt;NA&gt;           NA       NA        NA         13 -1.068779685</span></span>
<span><span class="co">## 137     &lt;NA&gt;           NA       NA        NA          7  0.316972118</span></span>
<span><span class="co">## 138     V 9   2.145745584      140       141         74  0.000000000</span></span>
<span><span class="co">## 139     V 3  -0.968510334      162       163         45  0.000000000</span></span>
<span><span class="co">## 140     V 9   0.378459341      142       143         72  0.000000000</span></span>
<span><span class="co">## 141     &lt;NA&gt;           NA       NA        NA          2  2.861149330</span></span>
<span><span class="co">## 142     V 3  -1.026005198      144       145         24  0.000000000</span></span>
<span><span class="co">## 143     V 1  -0.601160105      148       149         48  0.000000000</span></span>
<span><span class="co">## 144     V 3  -1.784254983      146       147         14  0.000000000</span></span>
<span><span class="co">## 145     &lt;NA&gt;           NA       NA        NA         10  0.352463908</span></span>
<span><span class="co">## 146     &lt;NA&gt;           NA       NA        NA          7 -1.342753577</span></span>
<span><span class="co">## 147     &lt;NA&gt;           NA       NA        NA          7 -0.478125604</span></span>
<span><span class="co">## 148     &lt;NA&gt;           NA       NA        NA         10  0.452243129</span></span>
<span><span class="co">## 149     V 1  -0.269269376      150       151         38  0.000000000</span></span>
<span><span class="co">## 150     V 3  -2.031660362      152       153         12  0.000000000</span></span>
<span><span class="co">## 151     V 1  -0.249391973      156       157         26  0.000000000</span></span>
<span><span class="co">## 152     &lt;NA&gt;           NA       NA        NA          1 -0.161411369</span></span>
<span><span class="co">## 153     V 3  -0.694417185      154       155         11  0.000000000</span></span>
<span><span class="co">## 154     &lt;NA&gt;           NA       NA        NA         10  0.918789555</span></span>
<span><span class="co">## 155     &lt;NA&gt;           NA       NA        NA          1  0.373254813</span></span>
<span><span class="co">## 156     &lt;NA&gt;           NA       NA        NA          1  0.304052770</span></span>
<span><span class="co">## 157     V 1   0.302551135      158       159         25  0.000000000</span></span>
<span><span class="co">## 158     V 4  -0.768414248      160       161         15  0.000000000</span></span>
<span><span class="co">## 159     &lt;NA&gt;           NA       NA        NA         10  2.090603844</span></span>
<span><span class="co">## 160     &lt;NA&gt;           NA       NA        NA          8  0.257445331</span></span>
<span><span class="co">## 161     &lt;NA&gt;           NA       NA        NA          7  1.727717773</span></span>
<span><span class="co">## 162     V 5   0.950067905      164       165         28  0.000000000</span></span>
<span><span class="co">## 163     V 3  -0.769979488      166       167         17  0.000000000</span></span>
<span><span class="co">## 164     &lt;NA&gt;           NA       NA        NA         21  1.560635190</span></span>
<span><span class="co">## 165     &lt;NA&gt;           NA       NA        NA          7  1.387853122</span></span>
<span><span class="co">## 166     &lt;NA&gt;           NA       NA        NA          7  1.241767160</span></span>
<span><span class="co">## 167     &lt;NA&gt;           NA       NA        NA         10  3.155629542</span></span>
<span><span class="co">## 168     V 1   0.790544664      170       171        275  0.000000000</span></span>
<span><span class="co">## 169     V 9   0.623554849      258       259         35  0.000000000</span></span>
<span><span class="co">## 170     V 3  -0.084940836      172       173        223  0.000000000</span></span>
<span><span class="co">## 171     V 3   0.763312927      244       245         52  0.000000000</span></span>
<span><span class="co">## 172     V 9   1.081387426      174       175         36  0.000000000</span></span>
<span><span class="co">## 173     V 3   2.051815273      186       187        187  0.000000000</span></span>
<span><span class="co">## 174     V 9   0.270557457      176       177         28  0.000000000</span></span>
<span><span class="co">## 175     &lt;NA&gt;           NA       NA        NA          8  2.646220066</span></span>
<span><span class="co">## 176     V 8  -0.750501199      178       179         15  0.000000000</span></span>
<span><span class="co">## 177     V 1  -0.471508188      184       185         13  0.000000000</span></span>
<span><span class="co">## 178     &lt;NA&gt;           NA       NA        NA          1 -1.433253766</span></span>
<span><span class="co">## 179     V 7  -2.138510389      180       181         14  0.000000000</span></span>
<span><span class="co">## 180     &lt;NA&gt;           NA       NA        NA          1 -0.079023630</span></span>
<span><span class="co">## 181     V 8   0.943044327      182       183         13  0.000000000</span></span>
<span><span class="co">## 182     &lt;NA&gt;           NA       NA        NA         10  0.272021119</span></span>
<span><span class="co">## 183     &lt;NA&gt;           NA       NA        NA          3  2.611826807</span></span>
<span><span class="co">## 184     &lt;NA&gt;           NA       NA        NA          3 -0.052476521</span></span>
<span><span class="co">## 185     &lt;NA&gt;           NA       NA        NA         10  2.277160016</span></span>
<span><span class="co">## 186     V 9   1.343866134      188       189        178  0.000000000</span></span>
<span><span class="co">## 187     &lt;NA&gt;           NA       NA        NA          9  4.222427173</span></span>
<span><span class="co">## 188     V 3   1.332984816      190       191        167  0.000000000</span></span>
<span><span class="co">## 189    V 10  -1.350376528      242       243         11  0.000000000</span></span>
<span><span class="co">## 190     V 3   1.136046868      192       193        143  0.000000000</span></span>
<span><span class="co">## 191     V 1   0.150069231      236       237         24  0.000000000</span></span>
<span><span class="co">## 192     V 3   0.276076882      194       195        134  0.000000000</span></span>
<span><span class="co">## 193     &lt;NA&gt;           NA       NA        NA          9  2.842131069</span></span>
<span><span class="co">## 194     V 9   0.924490900      196       197         48  0.000000000</span></span>
<span><span class="co">## 195     V 1  -0.126527401      210       211         86  0.000000000</span></span>
<span><span class="co">## 196     V 1  -0.562247053      198       199         44  0.000000000</span></span>
<span><span class="co">## 197     &lt;NA&gt;           NA       NA        NA          4  2.557928653</span></span>
<span><span class="co">## 198     V 2   0.921662358      200       201         15  0.000000000</span></span>
<span><span class="co">## 199     V 4   0.063461054      204       205         29  0.000000000</span></span>
<span><span class="co">## 200     V 2  -0.073666563      202       203         13  0.000000000</span></span>
<span><span class="co">## 201     &lt;NA&gt;           NA       NA        NA          2 -0.001233008</span></span>
<span><span class="co">## 202     &lt;NA&gt;           NA       NA        NA          7  0.381035910</span></span>
<span><span class="co">## 203     &lt;NA&gt;           NA       NA        NA          6  1.281298336</span></span>
<span><span class="co">## 204     V 7  -0.543694073      206       207         17  0.000000000</span></span>
<span><span class="co">## 205     V 3   0.006409995      208       209         12  0.000000000</span></span>
<span><span class="co">## 206     &lt;NA&gt;           NA       NA        NA          7  2.082875104</span></span>
<span><span class="co">## 207     &lt;NA&gt;           NA       NA        NA         10  1.414596639</span></span>
<span><span class="co">## 208     &lt;NA&gt;           NA       NA        NA          5  0.517814545</span></span>
<span><span class="co">## 209     &lt;NA&gt;           NA       NA        NA          7  1.425930355</span></span>
<span><span class="co">## 210     V 4   0.835895726      212       213         37  0.000000000</span></span>
<span><span class="co">## 211     V 3   0.709453728      224       225         49  0.000000000</span></span>
<span><span class="co">## 212     V 4  -0.269537878      214       215         32  0.000000000</span></span>
<span><span class="co">## 213     &lt;NA&gt;           NA       NA        NA          5  1.008647127</span></span>
<span><span class="co">## 214     V 9   0.677534260      216       217         15  0.000000000</span></span>
<span><span class="co">## 215     V 4   0.624935172      220       221         17  0.000000000</span></span>
<span><span class="co">## 216     V 9   0.166190376      218       219         11  0.000000000</span></span>
<span><span class="co">## 217     &lt;NA&gt;           NA       NA        NA          4  2.762488633</span></span>
<span><span class="co">## 218     &lt;NA&gt;           NA       NA        NA          7  1.473904804</span></span>
<span><span class="co">## 219     &lt;NA&gt;           NA       NA        NA          4  2.333795962</span></span>
<span><span class="co">## 220     V 7   0.285653119      222       223         13  0.000000000</span></span>
<span><span class="co">## 221     &lt;NA&gt;           NA       NA        NA          4  0.678882941</span></span>
<span><span class="co">## 222     &lt;NA&gt;           NA       NA        NA          8  2.106691243</span></span>
<span><span class="co">## 223     &lt;NA&gt;           NA       NA        NA          5  0.496236762</span></span>
<span><span class="co">## 224     &lt;NA&gt;           NA       NA        NA         28  1.894484219</span></span>
<span><span class="co">## 225     V 6  -1.105478996      226       227         21  0.000000000</span></span>
<span><span class="co">## 226     &lt;NA&gt;           NA       NA        NA          3  3.246087325</span></span>
<span><span class="co">## 227     V 4   1.059238428      228       229         18  0.000000000</span></span>
<span><span class="co">## 228     V 4  -0.480899694      230       231         17  0.000000000</span></span>
<span><span class="co">## 229     &lt;NA&gt;           NA       NA        NA          1  1.733109373</span></span>
<span><span class="co">## 230     &lt;NA&gt;           NA       NA        NA          4  1.723979096</span></span>
<span><span class="co">## 231     V 4  -0.418572196      232       233         13  0.000000000</span></span>
<span><span class="co">## 232     &lt;NA&gt;           NA       NA        NA          1  1.265400523</span></span>
<span><span class="co">## 233     V 6  -0.076132076      234       235         12  0.000000000</span></span>
<span><span class="co">## 234     &lt;NA&gt;           NA       NA        NA          3  3.949907056</span></span>
<span><span class="co">## 235     &lt;NA&gt;           NA       NA        NA          9  2.929014449</span></span>
<span><span class="co">## 236     V 9   0.713825962      238       239         16  0.000000000</span></span>
<span><span class="co">## 237     &lt;NA&gt;           NA       NA        NA          8  2.837167998</span></span>
<span><span class="co">## 238     V 9  -0.132071548      240       241         13  0.000000000</span></span>
<span><span class="co">## 239     &lt;NA&gt;           NA       NA        NA          3  3.887067036</span></span>
<span><span class="co">## 240     &lt;NA&gt;           NA       NA        NA          5  1.755728835</span></span>
<span><span class="co">## 241     &lt;NA&gt;           NA       NA        NA          8  2.824642864</span></span>
<span><span class="co">## 242     &lt;NA&gt;           NA       NA        NA          4  4.181286753</span></span>
<span><span class="co">## 243     &lt;NA&gt;           NA       NA        NA          7  2.775822127</span></span>
<span><span class="co">## 244     V 9   1.238645228      246       247         29  0.000000000</span></span>
<span><span class="co">## 245     V 9   0.404696084      254       255         23  0.000000000</span></span>
<span><span class="co">## 246     V 9   0.063649950      248       249         25  0.000000000</span></span>
<span><span class="co">## 247     &lt;NA&gt;           NA       NA        NA          4  3.925580300</span></span>
<span><span class="co">## 248     &lt;NA&gt;           NA       NA        NA          8  2.162254340</span></span>
<span><span class="co">## 249     V 7  -0.900734272      250       251         17  0.000000000</span></span>
<span><span class="co">## 250     &lt;NA&gt;           NA       NA        NA          3  2.495057397</span></span>
<span><span class="co">## 251     V 4  -0.527972240      252       253         14  0.000000000</span></span>
<span><span class="co">## 252     &lt;NA&gt;           NA       NA        NA          4  3.024567839</span></span>
<span><span class="co">## 253     &lt;NA&gt;           NA       NA        NA         10  3.830827884</span></span>
<span><span class="co">## 254     &lt;NA&gt;           NA       NA        NA         10  3.632664827</span></span>
<span><span class="co">## 255     V 5  -0.112974489      256       257         13  0.000000000</span></span>
<span><span class="co">## 256     &lt;NA&gt;           NA       NA        NA          6  5.679580559</span></span>
<span><span class="co">## 257     &lt;NA&gt;           NA       NA        NA          7  4.553183634</span></span>
<span><span class="co">## 258     V 3   1.530286592      260       261         14  0.000000000</span></span>
<span><span class="co">## 259     V 5   1.043822482      264       265         21  0.000000000</span></span>
<span><span class="co">## 260     V 9  -0.110898622      262       263         13  0.000000000</span></span>
<span><span class="co">## 261     &lt;NA&gt;           NA       NA        NA          1  4.090908056</span></span>
<span><span class="co">## 262     &lt;NA&gt;           NA       NA        NA          3  2.442667057</span></span>
<span><span class="co">## 263     &lt;NA&gt;           NA       NA        NA         10  4.097267466</span></span>
<span><span class="co">## 264     V 5  -0.772476544      266       267         19  0.000000000</span></span>
<span><span class="co">## 265     &lt;NA&gt;           NA       NA        NA          2  5.976713414</span></span>
<span><span class="co">## 266     &lt;NA&gt;           NA       NA        NA          7  4.880034990</span></span>
<span><span class="co">## 267     V 4   0.402821807      268       269         12  0.000000000</span></span>
<span><span class="co">## 268     &lt;NA&gt;           NA       NA        NA          9  4.793675377</span></span>
<span><span class="co">## 269     &lt;NA&gt;           NA       NA        NA          3  6.759036121</span></span></code></pre></div>
<p>Check seed match</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">RLTrep</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/RLT.html">RLT</a></span><span class="op">(</span><span class="va">X</span>, <span class="va">y</span>, model <span class="op">=</span> <span class="st">"regression"</span>, </span>
<span>                ntrees <span class="op">=</span> <span class="fl">100</span>, ncores <span class="op">=</span> <span class="fl">1</span>, nmin <span class="op">=</span> <span class="fl">10</span>,</span>
<span>                split.gen <span class="op">=</span> <span class="st">"random"</span>, nsplit <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                resample.prob <span class="op">=</span> <span class="fl">0.85</span>, resample.replace <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                reinforcement <span class="op">=</span> <span class="cn">TRUE</span>, importance <span class="op">=</span> <span class="st">"distribute"</span>,</span>
<span>                param.control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"embed.ntrees"</span> <span class="op">=</span> <span class="fl">50</span>,</span>
<span>                                     <span class="st">"embed.mtry"</span> <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>,</span>
<span>                                     <span class="st">"embed.nmin"</span> <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>,</span>
<span>                verbose <span class="op">=</span> <span class="cn">TRUE</span>, seed <span class="op">=</span> <span class="va">RLTfit</span><span class="op">$</span><span class="va">parameters</span><span class="op">$</span><span class="va">seed</span><span class="op">)</span></span>
<span><span class="co">## Regression Random Forest ... </span></span>
<span><span class="co">## ---------- Parameters Summary ----------</span></span>
<span><span class="co">##               (N, P) = (1000, 10)</span></span>
<span><span class="co">##           # of trees = 100</span></span>
<span><span class="co">##         (mtry, nmin) = (3, 10)</span></span>
<span><span class="co">##       split generate = Random, 1</span></span>
<span><span class="co">##             sampling = 0.85 w/o replace</span></span>
<span><span class="co">##   (Obs, Var) weights = (No, No)</span></span>
<span><span class="co">##           importance = distribute</span></span>
<span><span class="co">##        reinforcement = Yes</span></span>
<span><span class="co">## ----------------------------------------</span></span>
<span><span class="co">##  embed.ntrees            = 50</span></span>
<span><span class="co">##  embed.mtry              = 50%</span></span>
<span><span class="co">##  embed.nmin              = 5</span></span>
<span><span class="co">##  embed.split.gen         = Random, 1</span></span>
<span><span class="co">##  embed.resample.replace  = TRUE</span></span>
<span><span class="co">##  embed.resample.prob     = 0.9</span></span>
<span><span class="co">##  embed.mute              = 0</span></span>
<span><span class="co">##  embed.protect           = 14</span></span>
<span><span class="co">##  embed.threshold         = 0.25</span></span>
<span><span class="co">## ----------------------------------------</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="va">RLTfit</span><span class="op">$</span><span class="va">VarImp</span> <span class="op">==</span> <span class="va">RLTrep</span><span class="op">$</span><span class="va">VarImp</span><span class="op">)</span></span>
<span><span class="co">## [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="linear-combination-split">Linear Combination Split<a class="anchor" aria-label="anchor" href="#linear-combination-split"></a>
</h2>
<p>We can also use a linear combination of variables as the splitting
rule, i.e.,</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>ùüè</mn><mo stretchy="false" form="prefix">(</mo><msup><mi>ùõÉ</mi><mi>T</mi></msup><mi>ùê±</mi><mo>&gt;</mo><mi>c</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex"> \mathbf{1}( \boldsymbol \beta^T \mathbf{x} &gt; c ) </annotation></semantics></math>
The search of top variables is the same embedded random forest, however,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ùõÉ</mi><annotation encoding="application/x-tex">\boldsymbol \beta</annotation></semantics></math>
is determined using other criteria such as the <code>"naive"</code>
appraoch proposed in the original paper (Zhu, et al.¬†2015), PCA
(<code>"pca"</code>), linear regression (<code>"lm"</code>) and sliced
inverse regression (<code>"sir"</code>). When a categorical variable is
encountered (random best at internal node), the algorithm switch to the
default single variable split.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="co"># set.seed(1)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://www.stats.ox.ac.uk/pub/MASS4/" class="external-link">MASS</a></span><span class="op">)</span></span>
<span>  <span class="va">ntrain</span> <span class="op">=</span> <span class="fl">300</span></span>
<span>  <span class="va">ntest</span> <span class="op">=</span> <span class="fl">500</span></span>
<span>  <span class="va">n</span> <span class="op">=</span> <span class="va">ntrain</span> <span class="op">+</span> <span class="va">ntest</span></span>
<span>  <span class="va">p</span> <span class="op">=</span> <span class="fl">10</span></span>
<span>  <span class="va">S</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="va">p</span>, <span class="va">p</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="va">S</span><span class="op">)</span> <span class="op">=</span> <span class="fl">1</span></span>
<span></span>
<span>  <span class="va">X1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/MASS/man/mvrnorm.html" class="external-link">mvrnorm</a></span><span class="op">(</span><span class="va">n</span>, mu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">p</span><span class="op">)</span>, Sigma <span class="op">=</span> <span class="va">S</span><span class="op">)</span></span>
<span>  <span class="va">X2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n</span> <span class="op">*</span> <span class="va">p</span><span class="op">)</span> <span class="op">*</span> <span class="fl">5</span><span class="op">)</span>, <span class="va">n</span>, <span class="va">p</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Combine continuous and categorical variables into a data frame (X)</span></span>
<span>  <span class="va">X</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">X1</span>, <span class="va">X2</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Convert the second half of the columns in X to factors</span></span>
<span>  <span class="va">X</span><span class="op">[</span>, <span class="op">(</span><span class="va">p</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span><span class="op">:</span><span class="op">(</span><span class="fl">2</span><span class="op">*</span><span class="va">p</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">X</span><span class="op">[</span>, <span class="op">(</span><span class="va">p</span><span class="op">+</span><span class="fl">1</span><span class="op">)</span><span class="op">:</span><span class="op">(</span><span class="fl">2</span><span class="op">*</span><span class="va">p</span><span class="op">)</span><span class="op">]</span>, <span class="va">as.factor</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">xlink</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">1</span> <span class="op">+</span> <span class="va">x</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">x</span><span class="op">[</span>, <span class="fl">3</span><span class="op">]</span> <span class="op">+</span> <span class="va">x</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">]</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">2</span>,<span class="fl">4</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># outcome</span></span>
<span>  <span class="va">y</span> <span class="op">=</span> <span class="fu">xlink</span><span class="op">(</span><span class="va">X</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span>  <span class="va">w</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">ntrain</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">xtrain</span> <span class="op">=</span> <span class="va">X</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="va">ntrain</span>, <span class="op">]</span></span>
<span>  <span class="va">ytrain</span> <span class="op">=</span> <span class="va">y</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="va">ntrain</span><span class="op">]</span></span>
<span>  <span class="va">xtest</span> <span class="op">=</span> <span class="va">X</span><span class="op">[</span><span class="op">-</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">ntrain</span><span class="op">)</span>, <span class="op">]</span></span>
<span>  <span class="va">ytest</span> <span class="op">=</span> <span class="va">y</span><span class="op">[</span><span class="op">-</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">ntrain</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span>  <span class="va">start_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="va">RLTfit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/RLT.html">RLT</a></span><span class="op">(</span><span class="va">xtrain</span>, <span class="va">ytrain</span>, model <span class="op">=</span> <span class="st">"regression"</span>, obs.w <span class="op">=</span> <span class="va">w</span>,</span>
<span>                ntrees <span class="op">=</span> <span class="fl">100</span>, ncores <span class="op">=</span> <span class="fl">1</span>, nmin <span class="op">=</span> <span class="fl">10</span>, mtry <span class="op">=</span> <span class="fl">10</span>,</span>
<span>                split.gen <span class="op">=</span> <span class="st">"random"</span>, nsplit <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                resample.prob <span class="op">=</span> <span class="fl">0.9</span>, resample.replace <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>                param.control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"linear.comb"</span> <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                                     <span class="st">"split.rule"</span> <span class="op">=</span> <span class="st">"naive"</span>,</span>
<span>                                     <span class="st">"embed.ntrees"</span> <span class="op">=</span> <span class="fl">50</span>,</span>
<span>                                     <span class="st">"embed.mtry"</span> <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>                                     <span class="st">"embed.nmin"</span> <span class="op">=</span> <span class="fl">5</span>,</span>
<span>                                     <span class="st">"embed.split.gen"</span> <span class="op">=</span> <span class="st">"random"</span>,</span>
<span>                                     <span class="st">"embed.nsplit"</span> <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                                     <span class="st">"embed.resample.replace"</span> <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                                     <span class="st">"embed.resample.prob"</span> <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>                                     <span class="st">"embed.mute"</span> <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>,</span>
<span>                                     <span class="st">"embed.protect"</span> <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                                     <span class="st">"embed.threshold"</span> <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span>,</span>
<span>                importance <span class="op">=</span> <span class="st">"permute"</span>, </span>
<span>                verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">## Regression Forest with Linear Combination Splits ... </span></span>
<span><span class="co">## ---------- Parameters Summary ----------</span></span>
<span><span class="co">##               (N, P) = (300, 20)</span></span>
<span><span class="co">##           # of trees = 100</span></span>
<span><span class="co">##         (mtry, nmin) = (10, 10)</span></span>
<span><span class="co">##       split generate = Random, 2</span></span>
<span><span class="co">##             sampling = 0.9 w/o replace</span></span>
<span><span class="co">##   (Obs, Var) weights = (Yes, No)</span></span>
<span><span class="co">##   linear combination = 3</span></span>
<span><span class="co">##           split rule = naive</span></span>
<span><span class="co">##           importance = permute</span></span>
<span><span class="co">##        reinforcement = No</span></span>
<span><span class="co">## ----------------------------------------</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/difftime.html" class="external-link">difftime</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">start_time</span>, units <span class="op">=</span> <span class="st">"secs"</span><span class="op">)</span></span>
<span><span class="co">## Time difference of 5.67665 secs</span></span>
<span>  </span>
<span>  <span class="co"># oob prediction and error</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">RLTfit</span><span class="op">$</span><span class="va">Prediction</span>, <span class="va">ytrain</span><span class="op">)</span></span></code></pre></div>
<p><img src="Test-RLT-Reg_files/figure-html/unnamed-chunk-5-1.png" width="75%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span> <span class="op">(</span><span class="va">RLTfit</span><span class="op">$</span><span class="va">Prediction</span> <span class="op">-</span> <span class="va">ytrain</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span> , na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">## [1] 1.303003</span></span>
<span>  </span>
<span>  <span class="co"># testing data error</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">RLTfit</span>, <span class="va">xtest</span><span class="op">)</span><span class="op">$</span><span class="va">Prediction</span> <span class="op">-</span> <span class="va">ytest</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">## [1] 1.144189</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">start_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="va">RLTvi2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/RLT.html">RLT</a></span><span class="op">(</span><span class="va">xtrain</span>, <span class="va">ytrain</span>, model <span class="op">=</span> <span class="st">"regression"</span>, obs.w <span class="op">=</span> <span class="va">w</span>,</span>
<span>                ntrees <span class="op">=</span> <span class="fl">100</span>, ncores <span class="op">=</span> <span class="fl">1</span>, nmin <span class="op">=</span> <span class="fl">10</span>, mtry <span class="op">=</span> <span class="fl">10</span>,</span>
<span>                split.gen <span class="op">=</span> <span class="st">"random"</span>, nsplit <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                resample.prob <span class="op">=</span> <span class="fl">0.9</span>, resample.replace <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>                param.control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"linear.comb"</span> <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                                     <span class="st">"split.rule"</span> <span class="op">=</span> <span class="st">"sir"</span>,</span>
<span>                                     <span class="st">"embed.ntrees"</span> <span class="op">=</span> <span class="fl">50</span>,</span>
<span>                                     <span class="st">"embed.mtry"</span> <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>                                     <span class="st">"embed.nmin"</span> <span class="op">=</span> <span class="fl">5</span>,</span>
<span>                                     <span class="st">"embed.split.gen"</span> <span class="op">=</span> <span class="st">"random"</span>,</span>
<span>                                     <span class="st">"embed.nsplit"</span> <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                                     <span class="st">"embed.resample.replace"</span> <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                                     <span class="st">"embed.resample.prob"</span> <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>                                     <span class="st">"embed.mute"</span> <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>,</span>
<span>                                     <span class="st">"embed.protect"</span> <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                                     <span class="st">"embed.threshold"</span> <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span>,</span>
<span>                importance <span class="op">=</span> <span class="st">"distribute"</span>, </span>
<span>                verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">## Regression Forest with Linear Combination Splits ... </span></span>
<span><span class="co">## ---------- Parameters Summary ----------</span></span>
<span><span class="co">##               (N, P) = (300, 20)</span></span>
<span><span class="co">##           # of trees = 100</span></span>
<span><span class="co">##         (mtry, nmin) = (10, 10)</span></span>
<span><span class="co">##       split generate = Random, 2</span></span>
<span><span class="co">##             sampling = 0.9 w/o replace</span></span>
<span><span class="co">##   (Obs, Var) weights = (Yes, No)</span></span>
<span><span class="co">##   linear combination = 3</span></span>
<span><span class="co">##           split rule = sir</span></span>
<span><span class="co">##           importance = distribute</span></span>
<span><span class="co">##        reinforcement = No</span></span>
<span><span class="co">## ----------------------------------------</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/difftime.html" class="external-link">difftime</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">start_time</span>, units <span class="op">=</span> <span class="st">"secs"</span><span class="op">)</span></span>
<span><span class="co">## Time difference of 6.035415 secs</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># sparse variable importance</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html" class="external-link">barplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">RLTfit</span><span class="op">$</span><span class="va">VarImp</span><span class="op">)</span>, main <span class="op">=</span> <span class="st">"RLT Permutation VI"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html" class="external-link">barplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">RLTvi2</span><span class="op">$</span><span class="va">VarImp</span><span class="op">)</span>, main <span class="op">=</span> <span class="st">"RLT Distributed VI"</span><span class="op">)</span></span></code></pre></div>
<p><img src="Test-RLT-Reg_files/figure-html/unnamed-chunk-7-1.png" width="90%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  </span>
<span>  <span class="co"># check one tree</span></span>
<span>  <span class="fu"><a href="../reference/get.one.tree.html">get.one.tree</a></span><span class="op">(</span><span class="va">RLTfit</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">## Tree #1 in the fitted linear combination regression forest:</span></span>
<span><span class="co">##    SplitVar.1 SplitVar.2 SplitVar.3 SplitLoad.1 SplitLoad.2 SplitLoad.3  SplitValue LeftNode RightNode   NodeWeight      NodeAve</span></span>
<span><span class="co">## 1         X1         X3               1.2726279   1.2065434   0.0000000  1.50562059        2         3 0.9086123910  0.000000000</span></span>
<span><span class="co">## 2         X1         X3               0.8961941   0.8310673   0.0000000  0.16411558        4         5 0.6549028144  0.000000000</span></span>
<span><span class="co">## 3         X3                          1.0000000   0.0000000   0.0000000  1.14855386       66        67 0.2537095765  0.000000000</span></span>
<span><span class="co">## 4         X3         X1               0.8127294   0.8020805   0.0000000 -0.72351686        6         7 0.5049518535  0.000000000</span></span>
<span><span class="co">## 5         X4                          1.0000000   0.0000000   0.0000000 -0.24094763       46        47 0.1499509609  0.000000000</span></span>
<span><span class="co">## 6         X3         X1               0.5079824   0.3975046   0.0000000 -0.58388937        8         9 0.2941519143  0.000000000</span></span>
<span><span class="co">## 7         X6         X9         X1   -0.2354511   0.1445568   0.1345640  0.75107949       26        27 0.2107999392  0.000000000</span></span>
<span><span class="co">## 8         X1         X3               0.4342927   0.2203757   0.0000000 -0.55635431       10        11 0.2126371105  0.000000000</span></span>
<span><span class="co">## 9         X6         X3              -0.6574569  -0.5144759   0.0000000  0.50793990       20        21 0.0815148038  0.000000000</span></span>
<span><span class="co">## 10        X3                          1.0000000   0.0000000   0.0000000 -0.55184096       12        13 0.1294154301  0.000000000</span></span>
<span><span class="co">## 11        X1                          1.0000000   0.0000000   0.0000000 -0.10591298       16        17 0.0832216803  0.000000000</span></span>
<span><span class="co">## 12        X1         X3               0.5456954   0.4225278   0.0000000 -1.07688884       14        15 0.1191381806  0.000000000</span></span>
<span><span class="co">## 13       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0102772495  0.003584946</span></span>
<span><span class="co">## 14       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0824211707 -1.304236643</span></span>
<span><span class="co">## 15       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0367170099 -0.486552592</span></span>
<span><span class="co">## 16        X3                          1.0000000   0.0000000   0.0000000 -0.74791097       18        19 0.0615716752  0.000000000</span></span>
<span><span class="co">## 17       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0216500051 -0.464798688</span></span>
<span><span class="co">## 18       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0496360087 -0.477394485</span></span>
<span><span class="co">## 19       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0119356665  0.366183461</span></span>
<span><span class="co">## 20        X6         X1              -0.2159646  -0.1999241   0.0000000 -0.20465779       22        23 0.0443698442  0.000000000</span></span>
<span><span class="co">## 21       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0371449597  1.041557392</span></span>
<span><span class="co">## 22       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0058206784 -1.230002276</span></span>
<span><span class="co">## 23        X6                          1.0000000   0.0000000   0.0000000 -0.15892108       24        25 0.0385491658  0.000000000</span></span>
<span><span class="co">## 24       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0292337277  0.048860490</span></span>
<span><span class="co">## 25       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0093154381 -0.567002341</span></span>
<span><span class="co">## 26        X3                          1.0000000   0.0000000   0.0000000  0.21410446       28        29 0.2052816425  0.000000000</span></span>
<span><span class="co">## 27       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0055182968  1.781658879</span></span>
<span><span class="co">## 28        X3                          1.0000000   0.0000000   0.0000000 -0.68204495       30        31 0.1519556817  0.000000000</span></span>
<span><span class="co">## 29        X9         X6         X3   -0.4912810  -0.3879249   0.3185859  0.66065487       42        43 0.0533259608  0.000000000</span></span>
<span><span class="co">## 30        X9         X6               0.2888330  -0.2886569   0.0000000 -0.15226039       32        33 0.0468448203  0.000000000</span></span>
<span><span class="co">## 31        X3         X9         X6    0.5222898   0.3408925  -0.2856419 -0.13073479       34        35 0.1051108614  0.000000000</span></span>
<span><span class="co">## 32       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0158277959  1.074211070</span></span>
<span><span class="co">## 33       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0310170244  1.770575425</span></span>
<span><span class="co">## 34        X3         X1               0.4465199  -0.2458432   0.0000000  0.01795314       36        37 0.0721371109  0.000000000</span></span>
<span><span class="co">## 35        X9                          1.0000000   0.0000000   0.0000000 -0.29198217       40        41 0.0329737506  0.000000000</span></span>
<span><span class="co">## 36        X3                          1.0000000   0.0000000   0.0000000 -0.55187610       38        39 0.0611584394  0.000000000</span></span>
<span><span class="co">## 37       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0109786714  1.526392863</span></span>
<span><span class="co">## 38       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0215007295  0.004979618</span></span>
<span><span class="co">## 39       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0396577099  1.291637561</span></span>
<span><span class="co">## 40       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0157803453  0.262334372</span></span>
<span><span class="co">## 41       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0171934053  1.940057593</span></span>
<span><span class="co">## 42        X3                          1.0000000   0.0000000   0.0000000  0.32067052       44        45 0.0336538020  0.000000000</span></span>
<span><span class="co">## 43       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0196721587  1.980057221</span></span>
<span><span class="co">## 44       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0080033602  1.009585428</span></span>
<span><span class="co">## 45       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0256504418  0.368721811</span></span>
<span><span class="co">## 46        X5         X6               0.4288791   0.3406007   0.0000000 -0.73576132       48        49 0.0535329390  0.000000000</span></span>
<span><span class="co">## 47       X10         X6               0.3203999  -0.2788683   0.0000000  0.48337878       56        57 0.0964180219  0.000000000</span></span>
<span><span class="co">## 48       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0023665999  0.596859800</span></span>
<span><span class="co">## 49        X5         X6               0.2304011   0.1279854   0.0000000  0.43628433       50        51 0.0511663391  0.000000000</span></span>
<span><span class="co">## 50        X1                          1.0000000   0.0000000   0.0000000  0.97559656       52        53 0.0369695012  0.000000000</span></span>
<span><span class="co">## 51       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0141968380  2.431119191</span></span>
<span><span class="co">## 52        X1         X6               0.5409050   0.4126852   0.0000000  0.40652523       54        55 0.0362548524  0.000000000</span></span>
<span><span class="co">## 53       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0007146488  2.134614132</span></span>
<span><span class="co">## 54       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0321002463  1.624900000</span></span>
<span><span class="co">## 55       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0041546061  2.592923645</span></span>
<span><span class="co">## 56       X10                          1.0000000   0.0000000   0.0000000 -0.79744530       58        59 0.0826373323  0.000000000</span></span>
<span><span class="co">## 57       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0137806897  3.219384167</span></span>
<span><span class="co">## 58       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0080639622  3.189504371</span></span>
<span><span class="co">## 59       X10                          1.0000000   0.0000000   0.0000000 -0.23204420       60        61 0.0745733701  0.000000000</span></span>
<span><span class="co">## 60       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0160068344  1.121868697</span></span>
<span><span class="co">## 61        X1                          1.0000000   0.0000000   0.0000000  0.48468420       62        63 0.0585665357  0.000000000</span></span>
<span><span class="co">## 62        X6         X3               0.5819112   0.3067817   0.0000000  0.54590912       64        65 0.0361594981  0.000000000</span></span>
<span><span class="co">## 63       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0224070376  2.545445436</span></span>
<span><span class="co">## 64       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0254494385  2.208407405</span></span>
<span><span class="co">## 65       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0107100597  2.179296574</span></span>
<span><span class="co">## 66        X3                          1.0000000   0.0000000   0.0000000  0.93642762       68        69 0.1425723833  0.000000000</span></span>
<span><span class="co">## 67        X1         X8         X3    0.5454891   0.4316316   0.3701453  2.12627617       78        79 0.1111371933  0.000000000</span></span>
<span><span class="co">## 68  X10.1 (F)                         1.0000000   0.0000000   0.0000000 34.00000000       70        71 0.1085622629  0.000000000</span></span>
<span><span class="co">## 69       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0340101203  3.987320312</span></span>
<span><span class="co">## 70        X6                          1.0000000   0.0000000   0.0000000  1.04650402       72        73 0.0751721297  0.000000000</span></span>
<span><span class="co">## 71       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0333901332  4.048189044</span></span>
<span><span class="co">## 72        X6                          1.0000000   0.0000000   0.0000000  0.35884653       74        75 0.0641749569  0.000000000</span></span>
<span><span class="co">## 73       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0109971728  1.335145627</span></span>
<span><span class="co">## 74        X6                          1.0000000   0.0000000   0.0000000 -0.57850749       76        77 0.0448467387  0.000000000</span></span>
<span><span class="co">## 75       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0193282181  2.061637428</span></span>
<span><span class="co">## 76       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0152506410  2.099487022</span></span>
<span><span class="co">## 77       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0295960977  2.712802624</span></span>
<span><span class="co">## 78        X1         X8               0.4723934   0.2486479   0.0000000  0.13624872       80        81 0.1069283673  0.000000000</span></span>
<span><span class="co">## 79       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0042088260  6.669114601</span></span>
<span><span class="co">## 80       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0317450649  3.401453205</span></span>
<span><span class="co">## 81        X3         X1               0.3988263   0.3153671   0.0000000  0.82224229       82        83 0.0751833024  0.000000000</span></span>
<span><span class="co">## 82       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0309567591  3.352649410</span></span>
<span><span class="co">## 83        X3                          1.0000000   0.0000000   0.0000000  1.95002815       84        85 0.0442265433  0.000000000</span></span>
<span><span class="co">## 84       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0391128846  4.139442670</span></span>
<span><span class="co">## 85       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;          NA          NA          NA          NA       NA        NA 0.0051136587  5.832819428</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="linear-combination-kernel">Linear combination kernel<a class="anchor" aria-label="anchor" href="#linear-combination-kernel"></a>
</h2>
<p>The linear combination split leads to non-rectangular kernels.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="co"># generate data</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="va">n</span> <span class="op">=</span> <span class="fl">500</span>; <span class="va">p</span> <span class="op">=</span> <span class="fl">5</span></span>
<span>  <span class="va">X</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n</span><span class="op">*</span><span class="va">p</span><span class="op">)</span>, <span class="va">n</span>, <span class="va">p</span><span class="op">)</span></span>
<span>  <span class="va">y</span> <span class="op">=</span> <span class="va">X</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">X</span><span class="op">[</span>, <span class="fl">3</span><span class="op">]</span> <span class="op">+</span> <span class="fl">0.3</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># fit model</span></span>
<span>  <span class="va">RLTfit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/RLT.html">RLT</a></span><span class="op">(</span><span class="va">X</span>, <span class="va">y</span>, model <span class="op">=</span> <span class="st">"regression"</span>,</span>
<span>                ntrees <span class="op">=</span> <span class="fl">300</span>, ncores <span class="op">=</span> <span class="fl">10</span>, nmin <span class="op">=</span> <span class="fl">15</span>, mtry <span class="op">=</span> <span class="fl">5</span>,</span>
<span>                split.gen <span class="op">=</span> <span class="st">"random"</span>, nsplit <span class="op">=</span> <span class="fl">3</span>, </span>
<span>                resample.prob <span class="op">=</span> <span class="fl">0.9</span>, resample.replace <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                param.control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"embed.ntrees"</span> <span class="op">=</span> <span class="fl">50</span>,</span>
<span>                                     <span class="st">"linear.comb"</span> <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                                     <span class="st">"embed.nmin"</span> <span class="op">=</span> <span class="fl">10</span>,</span>
<span>                                     <span class="st">"split.rule"</span> <span class="op">=</span> <span class="st">"naive"</span>,</span>
<span>                                     <span class="st">"alpha"</span> <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span>,</span>
<span>                verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">## Regression Forest with Linear Combination Splits ... </span></span>
<span><span class="co">## ---------- Parameters Summary ----------</span></span>
<span><span class="co">##               (N, P) = (500, 5)</span></span>
<span><span class="co">##           # of trees = 300</span></span>
<span><span class="co">##         (mtry, nmin) = (5, 15)</span></span>
<span><span class="co">##       split generate = Random, 3</span></span>
<span><span class="co">##             sampling = 0.9 w/o replace</span></span>
<span><span class="co">##   (Obs, Var) weights = (No, No)</span></span>
<span><span class="co">##                alpha = 0.25</span></span>
<span><span class="co">##   linear combination = 3</span></span>
<span><span class="co">##           split rule = naive</span></span>
<span><span class="co">##           importance = none</span></span>
<span><span class="co">##        reinforcement = No</span></span>
<span><span class="co">## ----------------------------------------</span></span>
<span><span class="co">## Package is not compiled with OpenMP (omp.h).</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Do not have 10 cores, use maximum 1 cores.</span></span>
<span></span>
<span>  <span class="co"># target point</span></span>
<span>  <span class="va">newX</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span><span class="op">)</span>, </span>
<span>                <span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># get kernel weights defined by the kernel function</span></span>
<span>  <span class="va">KernelW</span> <span class="op">=</span> <span class="fu"><a href="../reference/forest.kernel.html">forest.kernel</a></span><span class="op">(</span><span class="va">RLTfit</span>, X1 <span class="op">=</span> <span class="va">newX</span>, X2 <span class="op">=</span> <span class="va">X</span><span class="op">)</span><span class="op">$</span><span class="va">Kernel</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">X</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span>, <span class="va">X</span><span class="op">[</span>, <span class="fl">3</span><span class="op">]</span>, col <span class="op">=</span> <span class="st">"deepskyblue"</span>, pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span><span class="va">X</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span>, <span class="va">X</span><span class="op">[</span>, <span class="fl">3</span><span class="op">]</span>, col <span class="op">=</span> <span class="st">"darkorange"</span>, </span>
<span>         cex <span class="op">=</span> <span class="fl">10</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">KernelW</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">KernelW</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, lwd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span><span class="va">newX</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="va">newX</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span>, col <span class="op">=</span> <span class="st">"black"</span>, pch <span class="op">=</span> <span class="fl">4</span>, cex <span class="op">=</span> <span class="fl">4</span>, lwd <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span><span class="st">"topright"</span>, <span class="st">"Target Point"</span>, pch <span class="op">=</span> <span class="fl">4</span>, col <span class="op">=</span> <span class="st">"black"</span>, </span>
<span>         lwd <span class="op">=</span> <span class="fl">5</span>, lty <span class="op">=</span> <span class="cn">NA</span>, cex <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span></code></pre></div>
<p><img src="Test-RLT-Reg_files/figure-html/unnamed-chunk-8-1.png" width="90%" style="display: block; margin: auto;"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ruoqing Zhu, Sarah Formentini.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
