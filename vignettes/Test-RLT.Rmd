---
title: "RLT Package Reinforcement Learning Test"
author: "Ruoqing Zhu"
date: "Last Updated: `r format(Sys.time(), '%B %d, %Y')`"
output:
  html_document:
    code_folding: hide
    df_print: paged
    toc: yes
    toc_float:
      collapsed: true
      smooth_scroll: true
    toc_depth: '2'
  pdf_document:
    toc: yes
    toc_depth: 2
---

```{r set-options, echo=FALSE, cache=FALSE}
  options(width = 1000)
  knitr::opts_chunk$set(fig.width=9, fig.height=7, out.width = "75%", fig.align = 'center')
  knitr::opts_chunk$set(class.source = "fold-show")
  knitr::opts_chunk$set(collapse=TRUE)
```

## Install the RLT Package

### For Windows Users

In Windows, RLT can be installed using `install_github`. The compilation of this package requires GCC. Hence, you may also need to install Rtools from [here](https://cran.r-project.org/bin/windows/Rtools/).

```{r, eval=FALSE}
  # you may need to install the devtools package first
  # install.packages("devtools")
  library(devtools)

  # install the RLT package from GitHub
  # Rtools is required in Windows
   install_github("teazrq/RLT")
```

### For macOS Users

When installing RLT on macOS, the process can be slightly trickier. It mainly consists of two steps:

#### Step 1: Install Compilers

- Follow [this guide](https://mac.r-project.org/tools/) to install the GNU Fortran compiler: [gfortran-12.2-universal.pkg](https://mac.r-project.org/tools/gfortran-12.2-universal.pkg)
- If you do not already have Xcode (most systems come with Xcode installed already), you can use this line to install it:

```sh
sudo xcode-select --install
```

#### Step 2: Set Makevars to Point to the Compiler

Create the Makevars file using:

```sh
mkdir ~/.R
touch ~/.R/Makevars
```

Check your folder of gfortran. The compiler will be installed to `/opt/gfortran` folder as default.

Add these lines to point to the correct folder of the compiler. You may use `open -a TextEdit ~/.R/Makevars` to open a text editor and type in these lines:

```
FC = /opt/gfortran/bin/gfortran
F77 = /opt/gfortran/bin/gfortran
FLIBS = -L/opt/gfortran/lib
```

After completing these steps, you should be able to directly install the RLT package using `install_github("teazrq/RLT")` in RStudio the same way as Windows machine. The compilation may require a few minutes.

### OpenMP in macOS

The previous steps would not activate OpenMP parallel computing. To enable OpenMP while compiling the RLT package, follow these steps:

#### Step 1: Download and Install LLVM

For example, to install the 14.0.6 version (check the ones that compatible with your Xcode version), use:

```sh
curl -O https://mac.r-project.org/openmp/openmp-14.0.6-darwin20-Release.tar.gz
sudo tar fvxz openmp-14.0.6-darwin20-Release.tar.gz -C /
```

You should then see the following message:

```
usr/local/lib/libomp.dylib
usr/local/include/ompt.h
usr/local/include/omp.h
usr/local/include/omp-tools.h
```

#### Step 2: Add Flags into Makevars

The procedure is the same as we explained previously. You should add these two lines into your Makevars file:

```
CPPFLAGS += -Xclang -fopenmp
LDFLAGS += -lomp
```

After these two steps, you can then use `install_github("teazrq/RLT", force = TRUE)` to re-install the RLT package.

## Load the RLT Package

```{r}
library(RLT)
```

## Next steps

See the [Regression](articles/Test-Reg.html), [Classification](articles/Test-Cla.html), and [Survival](articles/Test-Surv.html) tutorials to get started with modeling.
